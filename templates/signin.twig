<div id="buttonsBlock">
    <a href="#"><img src="images\button1new.jpg" name="imagen" border="0"></a>
    <a href="#"><img src="images\button1signin.jpg" name="images" border="0"></a>
</div>

<div id="registerBlock" style="display:none">
    <form id="registerForm" method="POST" action="register">
        <table width="300" bordercolor="#376FA6">
            <tr><td colspan="2"><p align="center"><font face="Verdana" color="#FF0000" size="1">All fields are required!</font></p></td></tr>
            <tr><td><font face="Verdana" color="#376FA6" size="2">Name</font><font face="Verdana" color="#FF0000" size="1">*</font></td><td>: <input type="text" name="name" size="20"></td></tr>
            <tr><td><font face="Verdana" color="#376FA6" size="2">Country</font><font face="Verdana" color="#FF0000" size="1">*</font></td><td>: <select type="text" name="country" id="country" style="width: 170px;"></select></td></tr>
            <tr><td><font face="Verdana" color="#376FA6" size="2">E-mail</font><font face="Verdana" color="#FF0000" size="1">*</font></td><td>: <input type="text" name="email" size="20"></td></tr>
            <tr><td><font face="Verdana" color="#376FA6" size="2">Username</font><font face="Verdana" color="#FF0000" size="1">*</font></td><td>: <input type="text" name="login" size="20"></td></tr>
            <tr><td><font face="Verdana" color="#376FA6" size="2">Password</font><font face="Verdana" color="#FF0000" size="1">*</font></td><td>: <input type="password" name="password" size="20"></td></tr>
            <tr><td colspan="2"><p align="center"><input type="submit"></p></td></tr>
        </table>
    </form>

    <p align="center">
        <font face="Verdana" size="2">
            <b> If you are aleady registered, sign in here! </b>
        </font>
        <br>
        <a href="#"><img src="images/button1signin.jpg" name="images" border="0"></a>
    </p>
</div>

<div id="signInBlock" style="display:none">
    <form id="signinForm" method="POST" action="signin">
        <table width="300" bordercolor="#376FA6">
            <tr><td colspan="2"><p align="center"><font face="Verdana" color="#376FA6" size="1">You may sign in using your e-mail or username and password...</font></p></td></tr>
            <tr><td><font face="Verdana" color="#376FA6" size="2">Username / E-mail</font></td><td>: <input type="text" name="login" size="20"></td></tr>
            <tr><td><font face="Verdana" color="#376FA6" size="2">Password</font></td><td>: <input type="password" name="password" size="20"></td></tr>
            <tr><td colspan="2"><p align="center"><input type="submit" value="Sign in!" name="signin"></p></td></tr>
        </table>
    </form>

    <p align="center">
        <font face="Verdana" size="2">
            <b> If you are a new user, register first! </b>
        </font>
        <br>
        <a href="#"><img src="images/button1new.jpg" name="imagen" border="0"></a>
    </p>
</div>

<div id="logoutBlock" style="display:none">
    <a href="#"><img src="images\button1logout.png" name="imagelogout" border="0"></a>
</div>

<script language="javascript" type="text/javascript">

$( document ).ready(function() {

    // load countries list
    $.ajax({
        type: "GET",
        url: 'countries',
        success: function(data)
        {
            $('#country').empty().append(data);
        }
    });


    $('img[name=imagen]').mouseover(function() {
        $( this ).attr('src', "images\\button2new.jpg");
    });
    $('img[name=imagen]').mouseout(function() {
        $( this ).attr('src', "images\\button1new.jpg");
    });

    $('img[name=images]').mouseover(function() {
        $( this ).attr('src', "images\\button2signin.jpg");
    });
    $('img[name=images]').mouseout(function() {
        $( this ).attr('src', "images\\button1signin.jpg");
    });

    $('img[name=imagelogout]').mouseover(function() {
        $( this ).attr('src', "images\\button2logout.png");
    });
    $('img[name=imagelogout]').mouseout(function() {
        $( this ).attr('src', "images\\button1logout.png");
    });

    $('img[name=imagen]').click(function() {
        $('#buttonsBlock').hide();
        $('#registerBlock').show();
        $('#signInBlock').hide();
        $('#logoutBlock').hide();
    });

    $('img[name=images]').click(function() {
        $('#buttonsBlock').hide();
        $('#registerBlock').hide();
        $('#signInBlock').show();
        $('#logoutBlock').hide();
    });

    $("#registerForm").submit(function(e) {

        e.preventDefault(); // avoid to execute the actual submit of the form.

        // TODO: pre-validate fields

        var form = $(this);

        $.ajax({
            type: "POST",
            url: form.attr('action'),
            data: form.serialize(), // serializes the form's elements.
            success: function(data)
            {
                if (data === 'OK') {
                    document.location.reload(true);
                } else {
                    alert(data); // debug statement
                    // TODO: implement error text under form
                }
            }
        });
            
    });

    $("#signinForm").submit(function(e) {

        e.preventDefault(); // avoid to execute the actual submit of the form.

        // TODO: pre-validate fields

        var form = $(this);

        $.ajax({
            type: "POST",
            url: form.attr('action'),
            data: form.serialize(), // serializes the form's elements.
            success: function(data)
            {
                if (data === 'OK') {
                    document.location.reload(true);
                } else {
                    alert(data); // debug statement
                    // TODO: implement error text under form
                }
            }
        });

    });

});

</script>
